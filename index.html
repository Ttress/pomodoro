<html>
    
    <head>
        <title>Pomodoro technique</title>
        <link href="style.css" type="text/css" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@200&display=swap" rel="stylesheet">
    </head>
    
    <body>
        
        <div class="wrapper">
            
            <div id="headerContainer">
                <h1>Pomodoro</h1>
            </div>
            
            <div class="sessionContainer">
                <button class="button setting active" data-time="1500" id="shortsession">short<br>ses</button>
                <button class="button setting" data-time="3000" id="longsession">long<br>ses</button>
                <button class="button setting" data-time="300" id="shortbreak">short<br>brk</button>
                <button class="button setting" data-time="600" id="longbreak">long<br>brk</button>
            </div>

            <div class="timerContainer">
                <div id="timer"></div>
            </div>

            <div class="controlsContainer">
                <button class="button controls" id="playPause">‚ñ∂</button>
                <button class="button controls" id="reset"><span id="beHigherPlease">üîÑ</span></button>
            </div>

        </div>

        <script>
            
            const startSetting = document.querySelector('#shortsession');
            let lastchosen = startSetting;
            
            const timer = document.querySelector('#timer');
            let currentTime = startSetting.dataset.time;
            displayTime();
            
            let clockRunning = false;
            
            const settingButtons = document.querySelectorAll('.setting');
            settingButtons.forEach(button => button.addEventListener('click', settingChosen));
                                     
            const playButton = document.querySelector('#playpause');
            playButton.addEventListener('click', pressPlay);

            const resetButton = document.querySelector('#reset');
            resetButton.addEventListener('click', pressReset);

            function settingChosen() {
                if (clockRunning) {
                    clockRunning = !clockRunning;
                    playButton.innerHTML = "‚ñ∂"
                }
                if (lastchosen !== this) {
                    this.classList.toggle('active');
                    lastchosen.classList.toggle('active');
                } 
                currentTime = this.dataset.time;
                displayTime();
                lastchosen = this;
            }

            function pressPlay() {
                clockRunning = !clockRunning;
                if (playButton.innerHTML === "‚ñ∂") {
                    playButton.innerHTML = "‚ùö‚ùö"
                } else {
                    playButton.innerHTML = "‚ñ∂"
                }
            }

            function pressReset() {
                currentTime = lastchosen.dataset.time;
                displayTime();
                if (clockRunning) {
                    clockRunning = !clockRunning;
                }
                playButton.innerHTML = "‚ñ∂";
            }
            
            function displayTime() {
                if ((currentTime % 60) === 0) {
                    timer.innerHTML = Math.floor((currentTime / 60)) + ":" + (currentTime % 60) + 0;
                } else if ((currentTime % 60) < 10) {
                    timer.innerHTML = Math.floor((currentTime / 60)) + ":" + 0 + (currentTime % 60);
                } else {
                    timer.innerHTML = Math.floor((currentTime / 60)) + ":" + (currentTime % 60);
                }
            }

            setInterval( function tickingClock() {
                if (clockRunning) {
                    currentTime -= 1;
                    displayTime();
                } 
            }, 1000);

        </script>

    </body>

</html>